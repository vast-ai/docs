---
title: "Serverless"
sidebarTitle: "Serverless"
---

## Import

```python
from vastai import Serverless
```

## Constructor

```python
Serverless(
    api_key: Optional[str] = os.environ.get('VAST_API_KEY', None),
    *,
    debug: bool = False,
    instance: str = 'prod',
    connection_limit: int = 500,
    default_request_timeout: float = 600.0,
    max_poll_interval: float = 5.0
)
```

<ParamField path="api_key" type="Optional[str]" default="os.environ.get('VAST_API_KEY', None)">
  api_key
</ParamField>

<ParamField path="debug" type="bool" default="False">
  debug
</ParamField>

<ParamField path="instance" type="str" default="'prod'">
  instance
</ParamField>

<ParamField path="connection_limit" type="int" default="500">
  connection_limit
</ParamField>

<ParamField path="default_request_timeout" type="float" default="600.0">
  default_request_timeout
</ParamField>

<ParamField path="max_poll_interval" type="float" default="5.0">
  max_poll_interval
</ParamField>

## Methods

### is_open

```python
is_open()
```

### close

```python
async close()
```

### get_ssl_context

```python
async get_ssl_context() -> ssl.SSLContext
```

Download Vast.ai root cert and build SSL context (cached).

### get_endpoint

```python
async get_endpoint(name = '') -> Endpoint
```

<ParamField path="name" type="Any" default="''">
  name
</ParamField>

### get_endpoints

```python
async get_endpoints() -> list[Endpoint]
```

### get_endpoint_workers

```python
async get_endpoint_workers(endpoint: Endpoint) -> List[Worker]
```

<ParamField path="endpoint" type="Endpoint" required>
  endpoint
</ParamField>

### get_endpoint_session

```python
async get_endpoint_session(
    endpoint,
    session_id: int,
    session_auth: str,
    timeout: float = 10.0
)
```

<ParamField path="endpoint" type="Any" required>
  endpoint
</ParamField>

<ParamField path="session_id" type="int" required>
  session_id
</ParamField>

<ParamField path="session_auth" type="str" required>
  session_auth
</ParamField>

<ParamField path="timeout" type="float" default="10.0">
  timeout
</ParamField>

### end_endpoint_session

```python
async end_endpoint_session(session: Session, timeout: float = 10.0)
```

<ParamField path="session" type="Session" required>
  session
</ParamField>

<ParamField path="timeout" type="float" default="10.0">
  timeout
</ParamField>

### start_endpoint_session

```python
async start_endpoint_session(
    endpoint: Endpoint,
    cost: int = 100,
    lifetime: float = 60,
    on_close_route: str = None,
    on_close_payload: dict = None,
    timeout: float = None
) -> Session
```

<ParamField path="endpoint" type="Endpoint" required>
  endpoint
</ParamField>

<ParamField path="cost" type="int" default="100">
  cost
</ParamField>

<ParamField path="lifetime" type="float" default="60">
  lifetime
</ParamField>

<ParamField path="on_close_route" type="str">
  on_close_route
</ParamField>

<ParamField path="on_close_payload" type="dict">
  on_close_payload
</ParamField>

<ParamField path="timeout" type="float">
  timeout
</ParamField>

### queue_endpoint_request

```python
queue_endpoint_request(
    endpoint: Endpoint,
    worker_route: str,
    worker_payload: dict,
    session: Session = None,
    serverless_request: Optional[ServerlessRequest] = None,
    cost: int = 100,
    timeout: Optional[float] = None,
    worker_timeout: Optional[float] = 600,
    retry: bool = True,
    max_retries: int = None,
    stream: bool = False
) -> ServerlessRequest
```

Return a Future that will resolve once the request completes.

<ParamField path="endpoint" type="Endpoint" required>
  endpoint
</ParamField>

<ParamField path="worker_route" type="str" required>
  worker_route
</ParamField>

<ParamField path="worker_payload" type="dict" required>
  worker_payload
</ParamField>

<ParamField path="session" type="Session">
  session
</ParamField>

<ParamField path="serverless_request" type="Optional[ServerlessRequest]">
  serverless_request
</ParamField>

<ParamField path="cost" type="int" default="100">
  cost
</ParamField>

<ParamField path="timeout" type="Optional[float]">
  timeout
</ParamField>

<ParamField path="worker_timeout" type="Optional[float]" default="600">
  worker_timeout
</ParamField>

<ParamField path="retry" type="bool" default="True">
  retry
</ParamField>

<ParamField path="max_retries" type="int">
  max_retries
</ParamField>

<ParamField path="stream" type="bool" default="False">
  stream
</ParamField>
